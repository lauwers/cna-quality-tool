tosca_definitions_version: tosca_simple_yaml_1_3

metadata:
  template_name: cna-modeling-tosca-profile
  template_author: Distributed Systems Group
  template_version: 0.1.0

description: >-
  This TOSCA definitions document contains the CNA Modeling relationship types.

relationship_types:

  cna.qualityModel.entities.ConnectsTo.Link:
    derived_from: tosca.relationships.ConnectsTo
    description: Relationship Type to model Link entities
    properties:
      relation_type:
        type: string
        required: true
        description: Type of relation, e.g. subscribes to or calls
      timeout:
        type: integer
        description: If a timeout is applied for this link, specify it's length here. If no timeout is applied, use 0.
        default: 0
        required: true
    valid_target_types: [ tosca.capabilities.Endpoint, tosca.capabilities.Endpoint.Public]

  cna.qualityModel.entities.HostedOn.DeploymentMapping:
    derived_from: tosca.relationships.HostedOn
    description: Relationship Type to model DeploymentMapping entities
    properties:
      deployment:
        type: string
        required: true
        description: How this deployment mapping is described or ensured. Valid values can be manual, automated imperative, or automated declarative
        default: manual
    valid_target_types: [ tosca.capabilities.Compute ]

  cna.qualityModel.relationships.Provides.Endpoint:
    derived_from: tosca.relationships.Root
    description: Relationship Type to connect Endpoints to the Components which provide them
    valid_target_types: [ tosca.capabilities.Endpoint, tosca.capabilities.Endpoint.Public]

  cna.qualityModel.relationships.AttachesTo.DataAggregate:
    derived_from: tosca.relationships.AttachesTo
    valid_target_types: [tosca.capabilities.Attachment]
    properties:
      location:
        # Override parent AttachesTo definition to make this property non-required
        required: false
      usage_relation:
        type: string
        required: true
        description: Describes how a component uses attached data, that means whether it just uses (reads) it for its functionality or if it also updates and persists (writes) it; possible values are usage, cached usage, and persistence
      sharding_level:
        type: integer
        required: true
        default: 0
        description: Only applicable if data is persisted by a component; If a component persists data, the sharding level describes the number of shards used; 0 acts as a placeholder if data is not persisted; 1 is the default meaning that no sharding is used; >1 is the number of shards

  cna.qualityModel.relationships.AttachesTo.BackingData:
    derived_from: tosca.relationships.AttachesTo
    valid_target_types: [tosca.capabilities.Attachment]
    properties:
      location:
        # Override parent AttachesTo definition to make this property non-required
        required: false
      usage_relation:
        type: string
        required: true
        description: Describes how a component uses attached data, that means whether it just uses (reads) it for its functionality or if it also updates and persists (writes) it; possible values are usage and persistence
        
